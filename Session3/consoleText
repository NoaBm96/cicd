Started by user Noa Ben Mordechai
[Pipeline] Start of Pipeline
[Pipeline] node
Running on jenkins-ec2-agent01 in /home/ec2-user/jenkins-agent/jenkins-agent/workspace/devops-pipeline-run-docker
[Pipeline] {
[Pipeline] stage
[Pipeline] { (create dockerfile)
[Pipeline] sh
+ tee Dockerfile
            FROM ubuntu:latest
            RUN touch file-01.txt
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (build docker)
[Pipeline] isUnix
[Pipeline] withEnv
[Pipeline] {
[Pipeline] sh
+ docker build -t noaku/opsschool-jenkins-hw-03 .
Sending build context to Docker daemon  2.048kB

Step 1/2 : FROM ubuntu:latest
 ---> 74f2314a03de
Step 2/2 : RUN touch file-01.txt
 ---> Using cache
 ---> b458b0e308eb
Successfully built b458b0e308eb
Successfully tagged noaku/opsschool-jenkins-hw-03:latest
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] withDockerRegistry
$ docker login -u noaku -p ******** https://index.docker.io/v1/
WARNING! Using --password via the CLI is insecure. Use --password-stdin.
WARNING! Your password will be stored unencrypted in /home/ec2-user/jenkins-agent/jenkins-agent/workspace/devops-pipeline-run-docker@tmp/452df5cd-7aaa-4a0c-ba89-937e25dcac9e/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
[Pipeline] {
[Pipeline] isUnix
[Pipeline] withEnv
[Pipeline] {
[Pipeline] sh
+ docker tag noaku/opsschool-jenkins-hw-03 noaku/opsschool-jenkins-hw-03:latest
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] isUnix
[Pipeline] withEnv
[Pipeline] {
[Pipeline] sh
+ docker push noaku/opsschool-jenkins-hw-03:latest
The push refers to repository [docker.io/noaku/opsschool-jenkins-hw-03]
499b1313502c: Preparing
202fe64c3ce3: Preparing
202fe64c3ce3: Mounted from library/ubuntu
499b1313502c: Pushed
latest: digest: sha256:e958c546ef5ea610d71d46830a35e6b2e31f5a09c6aeb362c142e2a7c92f010c size: 735
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // withDockerRegistry
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (verify dockers)
[Pipeline] sh
+ docker images
REPOSITORY                        TAG       IMAGE ID       CREATED          SIZE
noaku/opsschool-jenkins-hw-03     latest    b458b0e308eb   18 minutes ago   77.8MB
noaku/opsschool-jenkins-test-01   latest    b458b0e308eb   18 minutes ago   77.8MB
ubuntu                            latest    74f2314a03de   3 days ago       77.8MB
training/webapp                   latest    6fae60ef3446   7 years ago      349MB
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
Finished: SUCCESS
